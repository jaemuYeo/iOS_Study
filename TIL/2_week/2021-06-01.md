# 학습활동

## 객체지향의 사실과 오해 다시보기 3장

첫 부분은 지하철의 추상화를 비유로 설명을 시작한다.

<img width="636" alt="스크린샷 2021-06-01 오후 6 33 20" src="https://user-images.githubusercontent.com/70311145/120301531-ea6afe80-c307-11eb-8ad5-b490c1cb5a22.png">

<img width="638" alt="스크린샷 2021-06-01 오후 6 33 26" src="https://user-images.githubusercontent.com/70311145/120301545-ef2fb280-c307-11eb-8833-3aa2aa185306.png">

첫 번째 사진은 해리 벡이 새로운 지하철 노선도를 창조하기 전 사진이고

실제 지도 위치에 따라 지하철 역을 배치하여 그려져있다.

지하철을 이용하는 승객의 `목적`은 하나의 역에서 다른 역으로 이동하는 것인지

또는 어떤 역에서 출발해 어떤 역떤 역에서 환승하고 도착하는지를 알려줘야한다.

그래서 해리 벡은 두 번째 사진처럼 지하철 노선도의 `정확성`을 버리고,

그 `목적`에 집중하여 현재의 노선도와 가까운 모습을 창조하게 되었다.

결론은 승객이 꼭 알아야하는 사실만 정확하게 표현하고 몰라도 되는 정보는 무시함으로써

이해하기 쉽고 단순하며 목적에 부합한 지하철 노선도를 창조해 낼 수 있었다는 것이다. (추상화)

---

추상화는 복잡한 현실을 단순화하기 위해 사용하는 인간의 가장 기본적인 인지 수단이라고 할 수 있다.

추상화의 수준, 이익, 가치는 목작에 `의존적`이다.

### 책 안의 추상화 정의

`어떤 양상, 세부 사항, 구조를 좀 더 명확하게 이해하기 위해 특정 절차나 물체를 의도적으로 생략하거나 감춤으로써 복잡도를 극복하는 방법이다.`

복잡성을 다루기 위해 추상화는 두 차원에서 이뤄진다.

- 구체적인 사물들 간의 공통점은 취하고 차이점은 버리는 일반화를 통해 단순하게 만드는 것
- 중요한 부분을 강조하기 위해 불필요한 세부 사항을 제거함으로써 단순하게 만드는 것

객체지향 패러다임은 `객체`라는 추상화를 통해 현실의 복잡성을 극복한다.

이번 장에서도 이상한나라의 앨리스의 내용을 이어서 추상화에 대한 개념을 설명했다.

```
커다란 장미 정원에 있는 스페이드 무늬가 그려져 있는 정원사들.
하트 여왕의 행차를 위해 클러버를 든 열명의 병사들.
온몸을 다이아몬드로 치장한 신하들이 열을 지어 들어옴.
열 명의 왕자와 공주들이 두 명씩 손을 잡고 깡총거리며 따라 들어옴.
대부분 왕들과 왕비들로 이루어진 손님들.
하얀 토끼.
왕관을 얹은 하트 잭.
하트 왕과 하트 여왕.

그리고 저들을 바라보는 앨리스
```

위에는 줄거리에 나오는 등장인물들이 나열되어있다.

등장인물들은 다른 뜻으로 하나하나 `객체`이다.

여기서 앨리스는 속으로 `기껏해야 트럼프에 불과해. 무서워할 필요 없어.`라고 속으로 생각한다.

앨리스는 하얀 토끼를 제외한 모든 객체를 '트럼프'라는 하나의 개념으로 단순화해서 바라보고 있다.

객체 하나하나의 자세한 모습을 무시한채 공통점만을 취해 단순화해버렸다.

이처럼 명확한 경계를 가지고 서로 구별할 수 있는 구체적인 사람이나 사물을 객체지향 패러다임에서는

`객체`라고 한다.

**앨리스가 추상화한 등장인물**

```swift
트럼프 {
    커다란 장미 정원에 있는 스페이드 무늬가 그려져 있는 정원사들.
    하트 여왕의 행차를 위해 클러버를 든 열명의 병사들.
    온몸을 다이아몬드로 치장한 신하들이 열을 지어 들어옴.
    열 명의 왕자와 공주들이 두 명씩 손을 잡고 깡총거리며 따라 들어옴.
    대부분 왕들과 왕비들로 이루어진 손님들.
    왕관을 얹은 하트 잭.
}

토끼 {
    하얀토끼
}
```

앨리스가 인물들의 차이점을 무시하고 공통점만을 취해 트럼프라는 개념으로 단순화한 것은 추상화의 일종이다.

이처럼 공통점을 기반으로 객체들을 묶기 위한 그릇을 `개념`이라고 한다.

> 우리가 인식하고 있는 다양한 사물이나 객체에 적용할 수 있는 아이디어나 관념을 뜻한다.

예를들어

- 하늘을 나는 교통수단을 뭐라고하지? 비행기
- 'TIL'을 쓰고있는 나는 '인간'이며 나는 '책상' 위에 놓인 '모니터'에 수놓아진 '글자'들을 바라보며
  '키보드'를 이용해 'TIL'을 써내려가고 있다.

개념을 이용하면 객체를 여러 그룹으로 `분류` 할 수 있다.

위 의사코드와 같이 두 개의 개념으로 나누고는 두 개념에 적합한 객체가 각 그룹에 포함되도록 `분류`했다.

하트여왕은 '트럼프'라는 개념 그룹의 일원이고 하얀 토끼는 '토끼'라는 개념 그룹의 일원이다.

이처럼 객체에 어떤 개념을 적용하는 것이 가능하여 개념 그룹의 일원이 될 때 객체를 그 개념의 `인스턴스`라고 한다.

`객체란 특정한 개념을 적용할 수 있는 구체적인 사물을 의미한다. 개념이 객체에 적용됐을 때 겍체를 개념의 인스턴스라고 한다.`

### 개념의 세 가지 관점

- 심볼(Symbol) - 개념을 가리키는 간략한 이름이나 명칭

- 내연(Intension) - 개념의 완전한 정의를 나타내며 내연의 의미를 이용하여 객체가 개념에 속하는지 여부를 확인할 수 있다.

- 외연(Extension) - 개념에 속하는 모든 객체의 집합

앨리스 줄거리에서 '트럼프'라는 이름은 개념의 심볼이 된다.

트럼프의 공통된 특징 중 몸이 납작하고 두 손과 두 발이 네모난 몸 모서리에 달려 있다는

트럼프에 대한 설명은 내연이다.

외연은 '트럽프'안의 모든 등장인물 하나하나 또는 '토끼'안의 하얀토끼가 된다.

---

어떤 객체와 마주했을 때 객체에게 적용할 개념을 결정하는 것은 결국 해당 객체를 개념이

적용된 객체 집합의 일원으로 맞아들인다는 것을 의미한다.

객체에 어떤 개념을 적용할 것인지를 결정하는 것은 결국 객체들을 개념에 따라 `분류`하는 것과 동일하다.

`분류란 객체에 특정한 개념을 적용하는 작업이다.`

분류는 객체지향의 가장 중요한 개념 중 하나이며, 어떤 객체를 어떤 개념으로 분류할지가

객체지향의 품질을 결정한다. 객체를 적절한 개념에 따라 분류하지 못한 애플리케이션은

유지보수가 어렵고 변화에 쉽게 대처하지 못한다.

---

### 타입

타입의 정의는 개념의 정의와 완전히 동일하다. 공통점을 기반으로 객체들을 묶기 위한 틀이다.

타입도 개념과 같이 심볼, 내연, 외연을 이용해 서술할 수 있고, 타입에 속하는 객체 역시

타입의 인스턴스라고 한다.

**데이터 타입**

메모리의 세상에는 타입이라는 질서가 존재하지 않는다. 타입이 없는 체계 안에서 모든 데이터는

일련의 비트열로 구성된다. 이 무질서가 초래한 혼돈의 세상 속에 사람들은 자신이 다뤄야 하는

데이터의 용도와 행동에 따라 그것들을 분류했고 이 것들이 데이터 타입이 되었다.

`데이터 타입은 메모리 안에 저장된 데이터의 종류를 분류하는 데 사용하는 메모리 집합에 관한 메타데이터다.`

`데이터에 대한 분류는 암시적으로 어떤 종류의 연산이 해당 데이터에 대해 수행될 수 있는지를 결정한다.`

**객체와 타입**

- 어떤 객체가 어떤 타입에 속하는지를 결정하는 것은 객체가 수행하는 행동이다.

  어떤 객체들이 동일한 행동을 수행할 수 있다면 그 객체들은 동일한 타입으로 분류될 수 있다.

- 객체의 내부적인 표현은 외부로부터 철저하게 감춰진다. 객체의 행동을 가장 효과적으로

  수행할 수만 있다면 객체 내부의 상태를 어떤 방식으로 표현하더라도 무방하다.

**행동이 우선이다!!**

객체가 어떤 행동을 하느냐에 따라 객체의 타입이 결정된다. 결과적으로 동일한 책임을 수행하는 일련의

객체는 동일한 타입에 속한다고 말할 수 있다. 객체의 타입을 결정하는 것은 객체의 `행동`뿐이다.

여기서 동일한 행동이란 동일한 책임을 의미하고, `동일한 책임`이란 `동일한 메시지 수신`을 의미한다.

객체지향의 특징 중인 `다형성`에 관련있고, 다형성이란 동일한 요첨에 대해 서로 다른 방식으로

응답할 수 있는 능력을 뜻한다.

동일한 메시지를 서로 다른 방식으로 처리하기 위해서는 객체들은 동일한 메시지를 수신할 수 있어야

하기 때문에 결과적으로 다형적인 객체들은 동일한 타입에 속하게 된다.

행동만이 타입을 결정하는 유일한 방법이라면 외부에서 데이터를 감춰야 한다는 것을 의미한다.

훌륭한 객체지향 설계는 외부에 행동만을 제공하고 데이터는 행동 뒤로 감춰야하며 이것을 `캡슐화`라고 한다.

---

### 정적 모델

타입을 사용하는 이유는 인간의 인지 능력으로는 시간에 따라 동적으로 변하는 객체의

복잡성을 극복하기가 너무 어렵기 때문이다.

타입을 사용하면 동적으로 변하는 객체의 상태를 적적인 관점에서 표현할 수 있다.

다시 반복하면 타입은 추상화이다. 타입을 이용하면 객체의 동적인 특성을 추상화할 수 있다.

결국 타입은 시간에 따른 객체의 상태 변경이라는 복잡성을 단순화할 수 있는 효과적인 방법인 것이다.

**클래스**

객체지향에서 중요한 것은 동적으로 변하는 개체의 `상태`와 상태를 변경하는 `행위`이다.

클래스는 타입을 구현하기 위해 프로그래밍 언어에서 제공하는 구현 메커니즘일 뿐이다.

클래스와 타입은 동일한 개념이 아니다.

---

## Typealias

기존에 선언되어있는 타입에 새로운 타입의 별칭을 사용함으로써

코드를 더 읽기 쉽도록, 이해하기 쉽도록 `명확`하게 만드는 문법이다.

swift에서 Typealias를 대부분의 타입에 사용이 가능하고 크게 세 가지 타입으로 나눌 수 있다.

- 내장 타입 - String, Int, Float .....
- 사용자 정의 타입 - Class, Struct, Enum
- 복합 타입 - Closure

### Typealias 선언 방법

```Swift
typealias name(붙여줄 별명) = existing type(존재하는 타입)
```

### 내장 타입 예시

```swift
typealias Name = String

let name: Name = "Jamking"
```

특별한 분류가 필요하거나 구분지어 사용하고 싶을 때 사용. '이 변수는 Name이라는 유형의 String이다'

### 사용자 정의 타입 예시

자체적으로 데이터 타입을 만들어야 할 경우가 있을 때 class를 사용하여 만들 수 있다.

```swift
class Animal {

}
typealias Animals = [Animal]
var animals: Animals = []
```

Animals라는 타입은 Array<Animal>, [Animal]과 동일한 타입이다.

### 복합 타입 예시

```swift
func handler(completeHandler: (Void) -> (Void)) {

}
handler 함수에 completeHandler라는 Closure를 선언
typealias voidHandler = (Void) -> (Void)

func handler(completeHandler: voidHandler) {

}
```

이렇게 사용하면 조금 더 깔끔하게 사용할 수 있다는 장점이 있다!!
