# Protocol

오늘 프로젝트의 기술 요구사항에서 프로토콜을 사용하는게 맞는가??

Enum Class Struct Protocol 중 어떤 것으로 타입을 정하는게 좋을까에 대한

주제로 많은 얘기를 했다.

그래서 Protocol의 깊은 문법에 대한 공부보다는 각자의 차이에 대해 조금 더

알아보는 시간을 가졌다.

아직도 타입을 설계할 때 어떤 것을 기준으로 할지에 대한 헷갈림이 남아있어서

조금 더 알아보는 시간을 갖게 되었다.

---

일단 Protocol vs Class에 대한 검색을 하다가 이해가 되었던 자료가 있었다.

[참고자료](https://yagom.net/forums/topic/%EA%B5%AC%EC%A1%B0%EB%A5%BC-%EC%A7%A4-%EB%95%8C-protocol%EA%B3%BC-class%EC%9D%98-%EA%B8%B0%EC%A4%80%EC%9D%B4-%EC%9E%88%EC%9D%84%EA%B9%8C%EC%9A%94/)

Struct와 Class를 어떤 기준으로 사용하는 기준이 무엇인지가 아닌

Protocol과 Class를 사용하는 기준에 대해 질문의 이해가 잘 안된다라는 댓글내용으로 시작한다.

- Protocol은 Class 같은 것들이 `특정 역할`을 수행하기 위해서 꼭 가져야하는

  메서드, 프로퍼티, 기타 요구사항들을 준수할 수 있게 `강제`하는 역할.

공식문서에 의한 정의로는 '특정 작업 혹은 기능들을 구현하기 위한 메소드,

프로퍼티 그리고 기타 다른 요구사항들의 청사진이다.'라고 하는데 분명 인스턴스에 대한 공부를 할때에도

청사진이라는 단어를 들어보았다.

조금 더 쉽게 해석하면 '해당 이름에 걸맞는 기능을 하기 위해서 구현해야 하는 것들의 리스트'라고도 한다.

Protocol은 Struct, Class, Enum에 `채택`할 수 있다.

채택할 수 있다는 말은 Class야 상속하면 그만이지만 대부분이 Struct로 구현된(또는 Enum)

스위프트 라이브러리에 정의된 타입에는 상속없이 어떻게 공통된 프로퍼티와 메서드를 정의할까??라는

답변에 Protocol과 Extension을 통해 구현되었다고 알게되었다.

스위프트 언어의 특성 중 프로토콜 지향 프로그래밍있고, 만약 이 프로토콜이 없었다면

매번 타입마다 프로퍼티와 메서드를 정의해야하는 번거로움도 있을 것이다..(끔찍)

그럼 공통된 특정 역할은 어떤걸까??

오토바이는 시동을 걸고, 달릴 수 있다.

```swift
struct Vehicle {
    var speed: Int
    var name: String

    func join() {
        // 시동 구현
    }
    func rotate() {
        // 달리기 구현
    }
}
```

하지만 오토바이 뿐만아니라 시동을 걸고, 달릴 수 있고, 속도가 있는 것들은

자동차, 비행기, 전동 킥보드 등등 여러가지가 있을 것이다.

이렇게 공통된 속성이나 행위를 묶어서 채택해주는 것이 프로토콜이다.

```swift
struct Vehicle: Machine {
    // 프로토콜 프로퍼티,메서드 구현
    // 그 외 오토바이만의 프로퍼티, 메서드
}

struct Car: Machine {
    // 프로토콜 프로퍼티, 메서드 구현
    // 그 외 자동차만의 프로퍼티, 메서드
}

protocol Machine {
    var speed: Int { get set }
    var name: String { get set }

    func join()

    func rotate()
}
```

이렇게 Protocol을 준수한다고 정의된다면 해당 Struct는 시동을 걸고 달릴 수 있는것을

해당 Struct를 보는 사람이 보장 받을 수 있어 안전성을 가진다.

반대로 Protocol만 보면 나는 오토바이인지 자동차인지는 모르지만 시동걸고, 굴러가는 것은 적어도 알고있을 것이다.

---

또 하나 간단한 예로 [UITableViewDelegate](https://developer.apple.com/documentation/uikit/uitableviewdelegate)을 통해 이해해 보았다.

FirstViewController, SecondViewController,,,, 등 여러 화면에서 TableView를

구현해야 할 때 Protocol이 없다면 각 클래스마다 구현에 필요한 기능들을 각각 정의하여 사용하게 될것이고

그렇게 되면 코드가 당연히 길어질 수 밖에 없을 것이다.

그럼 클래스를 만들어서 상속시키면 되지않나?? ViewController는 보통 UIViewController를 상속받고

있기 때문에 하나 이상의 상속은 불가능하다.

그래서 UITableViewDelegate라는 Protocol을 채택하여 공통된 메서드를 구현할 수 있을 것이다.

확실한 것은 아니지만 지금은 이렇게 이해하고 있다 ㅎㅎ

---

## 고민한점

1. 프로젝트 안에서 어떤 곳에 Protocol을 사용할 수 있을까??

2. 언제 클래스, 열거형, 구조체를 쓸까?

## 해결방안

1. 기능요구서에서 공통적인 기능으로 묶어둔 것들에 대해 Protocol을 사용해보면 좋을 것 같다.

2. [참고자료1](https://zeddios.tistory.com/12)

   [참고자료2](https://zeddios.tistory.com/15?category=685736)

   [참고자료3](https://velog.io/@rnfxl92/Swift-Class-vs-Struct)
